<!DOCTYPE html>
<html>

<head>
  <title>Day 09 - Components</title>
  <style>
    * {
      margin: 0px;
      overflow: hidden;
    }
  </style>
</head>

<body>
  <canvas id="canv"></canvas>

  <script src="./engine/Engine.js"></script>
  <script src="./engine/GameObject.js"></script>
  <script src="./engine/Time.js"></script>
  <script src="./engine/Collisions.js"></script>
  <script src="./engine/Input.js"></script>
  <script src="./engine/Scene.js"></script>
  <script src="./engine/Component.js"></script>
  <script src="./engine/Transform.js"></script>
  <script src="./engine/Circle.js"></script>
  <script src="./engine/KeyboardMovement.js"></script>

  <script src="./game/gameObjects/ControllerGameObject.js"></script>
  <script src="./game/gameObjects/LevelNumberGameObject.js"></script>
  <script src="./game/gameObjects/ScoreGameObject.js"></script>
  <script src="./game/gameObjects/GuardGameObject.js"></script>
  <script src="./game/gameObjects/PlayerGameObject.js"></script>
  <script src="./game/gameObjects/WinTextGameObject.js"></script>
  <script src="./game/gameObjects/DeathTextGameObject.js"></script>
  <script src="./game/gameObjects/WinController.js"></script>
  <script src="./game/gameObjects/DeathController.js"></script>

  <script src="./game/scenes/MainScene.js"></script>
  <script src="./game/scenes/DeathScene.js"></script>
  <script src="./game/scenes/WinScene.js"></script>

  <script src="./game/components/PlayerConstraints.js"></script>
  <script src="./game/components/GuardMovement.js"></script>
  <script src="./game/components/ControllerComponent.js"></script>

  <script>


    // Engine-specific state variables
    let canvas
    let ctx
    
    //Game loop (engine code)
    function tick() {
        Engine.currentScene.update()
        Engine.currentScene.draw()
    }

    /**
     * Setup the internals for the controller and view to run (engine code)
    */
    function setup() {
      window.addEventListener("keydown", Input.keydown)
      window.addEventListener("keyup", Input.keyup)

      canvas = document.getElementById("canv")
      ctx = canvas.getContext("2d")
    }

    setup() //Setup the mechanics of the game (engine code)

    Engine.currentScene = new MainScene() //Assign the start scene (game-specific code)
    Engine.currentScene.start() //Setup the state of the game (game code)

    setInterval(tick, Time.msBetweenFrames) //Start the game loop (engine code)

  </script>
</body>

</html>